(this["webpackJsonpfpga-js-emulator32"]=this["webpackJsonpfpga-js-emulator32"]||[]).push([[8],{15:function(n,t,e){"use strict";e.d(t,"b",(function(){return d})),e.d(t,"a",(function(){return o}));var r=e(2),s=e.n(r),u=e(5),i=e(6),a=e(7),c=e(22),l=e(8),o=function(){function n(){Object(i.a)(this,n)}return Object(a.a)(n,[{key:"parse",value:function(){var t=Object(u.a)(s.a.mark((function t(e,r){var u,i,a,c,l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:u=0,i=[],a={};case 3:if(!(u<=1e5)){t.next=23;break}return c=void 0,t.prev=5,t.next=8,n.getInstruction(u,e,r);case 8:c=t.sent,t.next=14;break;case 11:t.prev=11,t.t0=t.catch(5),console.log(t.t0);case 14:u+=2,c.setContent(),l=i.push(c),c.tableLine=l-1,c.hasArgument&&(u+=c.argumentLength),"nop"!==c.assembler&&("INSTRUCTION -> ".concat(c.assembler,"  ----  ").concat(c.constructor.name).includes("r2, 642120")&&console.log({address:u}),console.log("".concat(u,". INSTRUCTION -> ").concat(c.assembler,"  ----  ").concat(c.constructor.name))),a[c.address]=c,t.next=3;break;case 23:return console.log("GOTOVO PARSIRANJE"),t.abrupt("return",{lines:i,addressInstruction:a});case 25:case"end":return t.stop()}}),t,null,[[5,11]])})));return function(n,e){return t.apply(this,arguments)}}()}],[{key:"getInstruction",value:function(){var n=Object(u.a)(s.a.mark((function n(t,e,r){var u,i,a,o,d,f,h,b,p,y;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(u=e[t/2],i=u>>4&15,a=u>>12&15,o=u>>8&15,n.prev=4,(d=c.a[15&u]).hasOwnProperty(i)){n.next=8;break}return n.abrupt("return",new l.a(e,t,0,0,r));case 8:d=d[i],n.next=14;break;case 11:return n.prev=11,n.t0=n.catch(4),n.abrupt("return",new l.a(e,t,0,0,r));case 14:return h=(f=d).class,b=f.type,p=void 0===b?null:b,n.next=17,h();case 17:if(y=n.sent,!p){n.next=20;break}return n.abrupt("return",new y.default(e,t,a,o,p,r));case 20:return n.abrupt("return",new y.default(e,t,a,o,r));case 21:case"end":return n.stop()}}),n,null,[[4,11]])})));return function(t,e,r){return n.apply(this,arguments)}}()}]),n}(),d=new o},17:function(n,t,e){"use strict";var r=e(0),s=e(6),u=e(7),i=e(15),a=e(8);function c(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function l(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?c(e,!0).forEach((function(t){Object(r.a)(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):c(e).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}var o=new(function(){function n(){Object(s.a)(this,n),this.irq0=!1,this.irq2_pressed=!1,this.irq2_released=!1,this.irq0_address=8,this.irq2_pressed_address=32,this.irq2_released_address=40,this.inIrq=!1,this.memory=[],this.lines=[],this.addressInstruction={},this.context={},this.running=!0}return Object(u.a)(n,[{key:"run",value:function(){var n;(this.irq0||this.irq2_pressed||this.irq2_released)&&this.prepareIrq();var t=this.addressInstruction[a.a.fix(this.context.pc)];console.log("PC: ",this.context.pc);try{n=t.exec({context:this.context,memory:this.memory})}catch(e){this.running=!1,console.log(e)}return{shouldRunAgain:this.running,context:this.context,memory:this.memory,instructionResponse:l({},n)}}},{key:"prepareIrq",value:function(){if((!this.irq0||0!==this.memory[this.irq0_address])&&(!this.irq2_pressed||0!==this.memory[this.irq2_pressed_address/2])&&(!this.irq2_released||0!==this.memory[this.irq2_released_address/2]))if(this.context.sp-=2,this.memory[Math.floor(a.a.fix(this.context.sp)/2)]=this.context.f,this.context.sp-=4,this.memory[Math.floor(a.a.fix(this.context.sp)/2)]=this.context.pc>>16,this.memory[Math.floor(a.a.fix(this.context.sp+2)/2)]=65535&this.context.pc,this.irq0){this.context.pc=this.irq0_address;var n=i.a.getInstruction(this.memory,this.irq0_address);n.setContent(),this.lines[this.irq0_address]=n,n.tableLine=this.irq0_address,this.addressInstruction[this.irq0_address]=n,this.irq0=!1}else if(this.irq2_pressed){this.irq2_pressed=!1,this.context.pc=this.irq2_pressed_address;var t=i.a.getInstruction(this.memory,this.irq2_pressed_address);t.setContent(),this.lines[this.irq2_pressed_address]=t,t.tableLine=this.irq2_pressed_address,this.addressInstruction[this.irq2_pressed_address]=t}else if(this.irq2_released){this.irq2_released=!1,this.context.pc=this.irq2_released_address;var e=i.a.getInstruction(this.memory,this.irq2_released_address);e.setContent(),this.lines[this.irq2_released_address]=e,e.tableLine=this.irq2_released_address,this.addressInstruction[this.irq2_released_address]=e}}},{key:"stop",value:function(){this.running=!1}},{key:"halt",value:function(){this.running=!1}},{key:"inject",value:function(n,t,e){this.memory=n,this.lines=t,this.addressInstruction=e,this.context={r0:0,r1:0,r2:0,r3:0,r4:0,r5:0,r6:0,r7:0,r8:0,r9:0,r10:0,r11:0,r12:0,r13:0,pc:45056,sp:0,h:0,f:0}}},{key:"setContextField",value:function(n,t){this.context=l({},this.context,Object(r.a)({},n,t))}}]),n}());t.a=o},20:function(n,t,e){"use strict";e.d(t,"a",(function(){return r}));var r={0:"r0",1:"r1",2:"r2",3:"r3",4:"r4",5:"r5",6:"r6",7:"r7",8:"r8",9:"r9",10:"r10",11:"r11",12:"r12",13:"r13",15:"sp",14:"h"}},22:function(n,t,e){"use strict";e.d(t,"c",(function(){return i})),e.d(t,"b",(function(){return a})),e.d(t,"a",(function(){return c}));var r,s,u=e(0),i={ADD_W:19,ADD_S:1,ADD_B:10,SUB_W:20,SUB_S:2,AND_W:21,OR_W:22,XOR_W:23,SHL_W:25,SHR_W:24,MUL_W:26,DIV_W:27,AND_S:3,OR_S:4,XOR_S:5,SHL_S:7,SHR_S:6,MUL_S:8,DIV_S:9,SUB_B:11,AND_B:12,OR_B:13,XOR_B:14,SHL_B:16,SHR_B:15,MUL_B:17,DIV_B:18,FADD:28,FSUB:29,FMUL:30,FDIV:31},a=(r={},Object(u.a)(r,i.ADD_S,"add.s "),Object(u.a)(r,i.SUB_S,"sub.s "),Object(u.a)(r,i.AND_S,"and.s "),Object(u.a)(r,i.OR_S,"or.s "),Object(u.a)(r,i.XOR_S,"xor.s "),Object(u.a)(r,i.SHL_S,"shl.s "),Object(u.a)(r,i.SHR_S,"shr.s "),Object(u.a)(r,i.MUL_S,"mul.s "),Object(u.a)(r,i.DIV_S,"div.s "),Object(u.a)(r,i.ADD_B,"add.b "),Object(u.a)(r,i.SUB_B,"sub.b "),Object(u.a)(r,i.AND_B,"and.b "),Object(u.a)(r,i.OR_B,"or.b "),Object(u.a)(r,i.XOR_B,"xor.b "),Object(u.a)(r,i.SHL_B,"shl.b "),Object(u.a)(r,i.SHR_B,"shr.b "),Object(u.a)(r,i.MUL_B,"mul.b "),Object(u.a)(r,i.DIV_B,"div.b "),Object(u.a)(r,i.ADD_W,"add.w "),Object(u.a)(r,i.SUB_W,"sub.w "),Object(u.a)(r,i.AND_W,"and.w "),Object(u.a)(r,i.OR_W,"or.w "),Object(u.a)(r,i.XOR_W,"xor.w "),Object(u.a)(r,i.SHL_W,"shl.w "),Object(u.a)(r,i.SHR_W,"shr.w "),Object(u.a)(r,i.MUL_W,"mul.w "),Object(u.a)(r,i.DIV_W,"div.w "),Object(u.a)(r,i.FADD,"fadd "),Object(u.a)(r,i.FSUB,"fsub "),Object(u.a)(r,i.FMUL,"fmul "),Object(u.a)(r,i.FDIV,"fdiv "),r),c=(s={},Object(u.a)(s,0,{0:{class:function(){return e.e(86).then(e.bind(null,37))}},1:{class:function(){return e.e(83).then(e.bind(null,38))}},2:{class:function(){return e.e(82).then(e.bind(null,39))}},3:{class:function(){return e.e(79).then(e.bind(null,40))}},4:{class:function(){return e.e(87).then(e.bind(null,41))}},5:{class:function(){return e.e(89).then(e.bind(null,42))}},6:{class:function(){return e.e(90).then(e.bind(null,43))}},7:{class:function(){return e.e(88).then(e.bind(null,44))}},8:{class:function(){return e.e(91).then(e.bind(null,45))}},9:{class:function(){return e.e(78).then(e.bind(null,46))}},10:{class:function(){return e.e(92).then(e.bind(null,47))}},11:{class:function(){return e.e(85).then(e.bind(null,48))}},12:{class:function(){return e.e(80).then(e.bind(null,49))}},13:{class:function(){return e.e(81).then(e.bind(null,50))}},14:{class:function(){return e.e(84).then(e.bind(null,51))}},15:{class:function(){return e.e(77).then(e.bind(null,52))}}}),Object(u.a)(s,1,{0:{class:function(){return e.e(24).then(e.bind(null,53))}},1:{class:function(){return e.e(35).then(e.bind(null,54))}},2:{class:function(){return e.e(30).then(e.bind(null,55))}},3:{class:function(){return e.e(25).then(e.bind(null,56))}},4:{class:function(){return e.e(27).then(e.bind(null,57))}},5:{class:function(){return e.e(31).then(e.bind(null,58))}},6:{class:function(){return e.e(28).then(e.bind(null,59))}},7:{class:function(){return e.e(32).then(e.bind(null,60))}},8:{class:function(){return e.e(29).then(e.bind(null,61))}},9:{class:function(){return e.e(26).then(e.bind(null,62))}},10:{class:function(){return e.e(34).then(e.bind(null,63))}},15:{class:function(){return e.e(33).then(e.bind(null,64))}}}),Object(u.a)(s,2,{0:{class:function(){return e.e(23).then(e.bind(null,36))}},1:{class:function(){return e.e(20).then(e.bind(null,65))}},2:{class:function(){return e.e(16).then(e.bind(null,66))}},3:{class:function(){return e.e(11).then(e.bind(null,67))}},4:{class:function(){return e.e(13).then(e.bind(null,68))}},5:{class:function(){return e.e(17).then(e.bind(null,69))}},6:{class:function(){return e.e(14).then(e.bind(null,70))}},7:{class:function(){return e.e(18).then(e.bind(null,71))}},8:{class:function(){return e.e(15).then(e.bind(null,72))}},9:{class:function(){return e.e(12).then(e.bind(null,73))}},10:{class:function(){return e.e(19).then(e.bind(null,74))}}}),Object(u.a)(s,3,{0:{class:function(){return e.e(65).then(e.bind(null,75))}},1:{class:function(){return e.e(64).then(e.bind(null,76))}},2:{class:function(){return e.e(66).then(e.bind(null,77))}},3:{class:function(){return e.e(62).then(e.bind(null,78))}},4:{class:function(){return e.e(61).then(e.bind(null,79))}},5:{class:function(){return e.e(63).then(e.bind(null,80))}},8:{class:function(){return e.e(71).then(e.bind(null,81))}},9:{class:function(){return e.e(73).then(e.bind(null,82))}},10:{class:function(){return e.e(72).then(e.bind(null,83))}},11:{class:function(){return e.e(70).then(e.bind(null,84))}},12:{class:function(){return e.e(22).then(e.bind(null,85))}},13:{class:function(){return e.e(21).then(e.bind(null,86))}}}),Object(u.a)(s,4,{0:{class:function(){return e.e(6).then(e.bind(null,9))},type:i.ADD_W},1:{class:function(){return e.e(4).then(e.bind(null,10))},type:i.ADD_S},2:{class:function(){return e.e(5).then(e.bind(null,11))},type:i.ADD_W},3:{class:function(){return e.e(3).then(e.bind(null,12))},type:i.ADD_S},4:{class:function(){return e.e(1).then(e.bind(null,13))},type:i.ADD_B},7:{class:function(){return e.e(0).then(e.bind(null,3))},type:i.MUL_W},8:{class:function(){return e.e(6).then(e.bind(null,9))},type:i.SUB_W},9:{class:function(){return e.e(4).then(e.bind(null,10))},type:i.SUB_S},10:{class:function(){return e.e(5).then(e.bind(null,11))},type:i.SUB_W},11:{class:function(){return e.e(3).then(e.bind(null,12))},type:i.SUB_S},12:{class:function(){return e.e(1).then(e.bind(null,13))},type:i.SUB_B}}),Object(u.a)(s,5,{0:{class:function(){return e.e(6).then(e.bind(null,9))},type:i.AND_W},1:{class:function(){return e.e(4).then(e.bind(null,10))},type:i.AND_S},2:{class:function(){return e.e(5).then(e.bind(null,11))},type:i.AND_W},3:{class:function(){return e.e(3).then(e.bind(null,12))},type:i.AND_S},4:{class:function(){return e.e(1).then(e.bind(null,13))},type:i.AND_B},6:{class:function(){return e.e(0).then(e.bind(null,3))},type:i.SHR_W},7:{class:function(){return e.e(0).then(e.bind(null,3))},type:i.MUL_W},8:{class:function(){return e.e(6).then(e.bind(null,9))},type:i.OR_W},9:{class:function(){return e.e(4).then(e.bind(null,10))},type:i.OR_S},10:{class:function(){return e.e(5).then(e.bind(null,11))},type:i.OR_W},11:{class:function(){return e.e(3).then(e.bind(null,12))},type:i.OR_S},12:{class:function(){return e.e(1).then(e.bind(null,13))},type:i.OR_B}}),Object(u.a)(s,6,{0:{class:function(){return e.e(6).then(e.bind(null,9))},type:i.XOR_W},1:{class:function(){return e.e(4).then(e.bind(null,10))},type:i.XOR_S},2:{class:function(){return e.e(5).then(e.bind(null,11))},type:i.XOR_W},3:{class:function(){return e.e(3).then(e.bind(null,12))},type:i.XOR_S},4:{class:function(){return e.e(1).then(e.bind(null,13))},type:i.XOR_B},8:{class:function(){return e.e(39).then(e.bind(null,87))}},10:{class:function(){return e.e(38).then(e.bind(null,88))}},11:{class:function(){return e.e(37).then(e.bind(null,89))}},12:{class:function(){return e.e(36).then(e.bind(null,90))}}}),Object(u.a)(s,7,{0:{class:function(){return e.e(6).then(e.bind(null,9))},type:i.SHL_W},1:{class:function(){return e.e(4).then(e.bind(null,10))},type:i.SHL_S},2:{class:function(){return e.e(5).then(e.bind(null,11))},type:i.SHL_W},3:{class:function(){return e.e(3).then(e.bind(null,12))},type:i.SHL_S},4:{class:function(){return e.e(1).then(e.bind(null,13))},type:i.SHL_B},8:{class:function(){return e.e(6).then(e.bind(null,9))},type:i.SHR_W},9:{class:function(){return e.e(4).then(e.bind(null,10))},type:i.SHR_S},10:{class:function(){return e.e(5).then(e.bind(null,11))},type:i.SHR_W},11:{class:function(){return e.e(3).then(e.bind(null,12))},type:i.SHR_S},12:{class:function(){return e.e(1).then(e.bind(null,13))},type:i.SHR_B}}),Object(u.a)(s,8,{0:{class:function(){return e.e(6).then(e.bind(null,9))},type:i.MUL_W},1:{class:function(){return e.e(4).then(e.bind(null,10))},type:i.MUL_S},2:{class:function(){return e.e(5).then(e.bind(null,11))},type:i.MUL_W},3:{class:function(){return e.e(3).then(e.bind(null,12))},type:i.MUL_S},4:{class:function(){return e.e(1).then(e.bind(null,13))},type:i.MUL_B},8:{class:function(){return e.e(6).then(e.bind(null,9))},type:i.DIV_W},9:{class:function(){return e.e(4).then(e.bind(null,10))},type:i.DIV_S},10:{class:function(){return e.e(5).then(e.bind(null,11))},type:i.DIV_W},11:{class:function(){return e.e(3).then(e.bind(null,12))},type:i.DIV_S},12:{class:function(){return e.e(1).then(e.bind(null,13))},type:i.DIV_B}}),Object(u.a)(s,9,{0:{class:function(){return e.e(60).then(e.bind(null,91))}},1:{class:function(){return e.e(57).then(e.bind(null,92))}},2:{class:function(){return e.e(59).then(e.bind(null,93))}},3:{class:function(){return e.e(58).then(e.bind(null,94))}},4:{class:function(){return e.e(56).then(e.bind(null,95))}},6:{class:function(){return e.e(0).then(e.bind(null,3))},type:i.SHR_W},8:{class:function(){return e.e(55).then(e.bind(null,96))}},9:{class:function(){return e.e(52).then(e.bind(null,97))}},10:{class:function(){return e.e(54).then(e.bind(null,98))}},11:{class:function(){return e.e(53).then(e.bind(null,99))}},12:{class:function(){return e.e(51).then(e.bind(null,100))}}}),Object(u.a)(s,10,{0:{class:function(){return e.e(45).then(e.bind(null,101))}},1:{class:function(){return e.e(43).then(e.bind(null,102))}},2:{class:function(){return e.e(44).then(e.bind(null,103))}},3:{class:function(){return e.e(42).then(e.bind(null,104))}},4:{class:function(){return e.e(40).then(e.bind(null,105))}},8:{class:function(){return e.e(50).then(e.bind(null,106))}},10:{class:function(){return e.e(49).then(e.bind(null,107))}},11:{class:function(){return e.e(48).then(e.bind(null,108))}},12:{class:function(){return e.e(47).then(e.bind(null,109))}}}),Object(u.a)(s,11,{2:{class:function(){return e.e(7).then(e.bind(null,21))},type:i.FADD},3:{class:function(){return e.e(7).then(e.bind(null,21))},type:i.FSUB},4:{class:function(){return e.e(7).then(e.bind(null,21))},type:i.FMUL},5:{class:function(){return e.e(7).then(e.bind(null,21))},type:i.FDIV},7:{class:function(){return e.e(0).then(e.bind(null,3))},type:i.MUL_W}}),Object(u.a)(s,12,{0:{class:function(){return e.e(68).then(e.bind(null,110))}},1:{class:function(){return e.e(67).then(e.bind(null,111))}},2:{class:function(){return e.e(69).then(e.bind(null,112))}},3:{class:function(){return e.e(0).then(e.bind(null,3))},type:i.OR_W},4:{class:function(){return e.e(0).then(e.bind(null,3))},type:i.XOR_W},6:{class:function(){return e.e(0).then(e.bind(null,3))},type:i.SHR_W},7:{class:function(){return e.e(0).then(e.bind(null,3))},type:i.MUL_W},8:{class:function(){return e.e(74).then(e.bind(null,113))}},9:{class:function(){return e.e(76).then(e.bind(null,114))}},10:{class:function(){return e.e(75).then(e.bind(null,115))}}}),Object(u.a)(s,13,{0:{class:function(){return e.e(0).then(e.bind(null,3))},type:i.ADD_W},1:{class:function(){return e.e(0).then(e.bind(null,3))},type:i.SUB_W},2:{class:function(){return e.e(0).then(e.bind(null,3))},type:i.AND_W},3:{class:function(){return e.e(0).then(e.bind(null,3))},type:i.OR_W},4:{class:function(){return e.e(0).then(e.bind(null,3))},type:i.XOR_W},5:{class:function(){return e.e(0).then(e.bind(null,3))},type:i.SHL_W},6:{class:function(){return e.e(0).then(e.bind(null,3))},type:i.SHR_W},7:{class:function(){return e.e(0).then(e.bind(null,3))},type:i.MUL_W},8:{class:function(){return e.e(0).then(e.bind(null,3))},type:i.DIV_W},9:{class:function(){return e.e(46).then(e.bind(null,116))}}}),Object(u.a)(s,14,{0:{class:function(){return e.e(2).then(e.bind(null,14))},type:i.ADD_B},1:{class:function(){return e.e(2).then(e.bind(null,14))},type:i.SUB_B},2:{class:function(){return e.e(2).then(e.bind(null,14))},type:i.AND_B},3:{class:function(){return e.e(2).then(e.bind(null,14))},type:i.OR_B},4:{class:function(){return e.e(2).then(e.bind(null,14))},type:i.XOR_B},5:{class:function(){return e.e(2).then(e.bind(null,14))},type:i.SHL_B},6:{class:function(){return e.e(2).then(e.bind(null,14))},type:i.SHR_B},7:{class:function(){return e.e(2).then(e.bind(null,14))},type:i.MUL_B},8:{class:function(){return e.e(2).then(e.bind(null,14))},type:i.DIV_B},9:{class:function(){return e.e(41).then(e.bind(null,117))}}}),s)},25:function(n,t,e){n.exports=e(35)},30:function(n,t,e){},35:function(n,t,e){"use strict";e.r(t);var r=e(1),s=e.n(r),u=e(24),i=e.n(u),a=(e(30),e(18)),c=e(2),l=e.n(c),o=e(5),d=e(6),f=e(7),h=e(4),b=new(function(){function n(){Object(d.a)(this,n)}return Object(f.a)(n,[{key:"parse",value:function(){var n=Object(o.a)(l.a.mark((function n(t){var e;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!==t){n.next=2;break}return n.abrupt("return",{data:null});case 2:if((e=t.name.split(".").pop())!==h.a.ASM){n.next=7;break}return n.next=6,this.asmParse(t);case 6:return n.abrupt("return",n.sent);case 7:if(e!==h.a.BIN){n.next=11;break}return n.next=10,this.binParse(t);case 10:return n.abrupt("return",n.sent);case 11:if(e!==h.a.SYM){n.next=15;break}return n.next=14,this.symParse(t);case 14:return n.abrupt("return",n.sent);case 15:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}()},{key:"asmParse",value:function(n){return new Promise((function(t,e){try{var r=new FileReader;r.onload=function(n){var e=r.result;console.log({buffer:e});for(var s=Array(h.b).fill(0),u=e.split(" "),i=0,a=0;a<u.length;a++){var c=u[a];console.log({address:i,word:c,intNum:parseInt(c,16)}),s[i++]=parseInt(c,16)}t({data:s})},r.readAsText(n)}catch(s){e({error:s})}}))}},{key:"binParse",value:function(n){return new Promise((function(t,e){try{var r=new FileReader;r.onload=function(n){for(var e,s,u,i=r.result,a=new Int8Array(i),c=Array(h.b).fill(0),l=0;l<c.length/2;l++)(s=a[2*l])<0&&(s=256+s),e=s<<8,(u=a[2*l+1])<0&&(u=256+u),e+=u,c[l]=e;t({data:c})},r.readAsArrayBuffer(n)}catch(s){e({error:s})}}))}},{key:"symParse",value:function(n){return new Promise((function(t,e){try{var r=new FileReader;r.onload=function(n){for(var e=r.result.split("\n"),s={},u=0;u<e.length;u++){var i=e[u];if(""!==i.trim()){var a=i.split("=");s[a[1].trim()]=a[0].trim()}}t({data:s})},r.readAsText(n)}catch(s){e({error:s})}}))}}]),n}()),p=e(15),y=e(17),O=s.a.createContext({state:null,dispatch:function(){}}),m="SET_MEMORY",_="SET_INSTRUCTIONS",v="SET_CONTEXT",g="UPDATE_OUTPUT",j="SET_SYMBOLS";function S(){var n=Object(r.useState)([]),t=Object(a.a)(n,2),e=t[0],u=t[1],i=Object(r.useContext)(O),c=i.dispatch,d=i.state;function f(){return(f=Object(o.a)(l.a.mark((function n(){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:y.a.inject(d.memory,d.lines,d.addressInstruction),h();case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function h(){return S.apply(this,arguments)}function S(){return(S=Object(o.a)(l.a.mark((function n(){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:setTimeout(Object(o.a)(l.a.mark((function n(){var t,e,r,s,u;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=y.a.run(),e=t.shouldRunAgain,r=t.instructionResponse,s=t.context,u=t.memory,n.next=3,c({type:m,payload:u});case 3:return n.next=5,c({type:v,payload:s});case 5:if(!r.content&&0!==r.content){n.next=8;break}return n.next=8,c({type:g,payload:r});case 8:e&&h();case 9:case"end":return n.stop()}}),n)}))));case 1:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(r.useEffect)((function(){function n(){return(n=Object(o.a)(l.a.mark((function n(){var t,r,s,u,i,a;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log(e),!e.length){n.next=19;break}return t=e[0],r=null,e.length>1&&(t=e[0].name.includes(".bin")?e[0]:e[1],r=e[0].name.includes(".sym")?e[0]:e[1]),console.log(t),n.next=8,b.parse(t);case 8:if(s=n.sent,u=s.data,c({type:m,payload:u}),console.log({data:u}),!r){n.next=18;break}return n.next=15,b.parse(r);case 15:i=n.sent,a=i.data,c({type:j,payload:a});case 18:return n.abrupt("return");case 19:case"end":return n.stop()}}),n)})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[e]),Object(r.useEffect)((function(){function n(){return(n=Object(o.a)(l.a.mark((function n(){var t;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e.length>1&&Object.keys(d.symbolTable).length||1===e.length)){n.next=5;break}return n.next=3,p.b.parse(d.memory,d.symbolTable);case 3:t=n.sent,c({type:_,payload:t});case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}d.memory.length>0&&function(){n.apply(this,arguments)}()}),[d.memory,d.symbolTable]),s.a.createElement("div",null,s.a.createElement("input",{type:"file",id:"avatar",accept:".bin,.sym",name:"avatar",onChange:function(n){var t=n.currentTarget.files;u(t)},multiple:!0}),s.a.createElement("button",{onClick:function(){return f.apply(this,arguments)}},"Start"))}var x,w,D=e(19),k=e(0),A="white",R="black",I=(x={},Object(k.a)(x,"red","#ff0000"),Object(k.a)(x,A,"#ffffff"),Object(k.a)(x,R,"#000000"),Object(k.a)(x,"green","#33cc33"),Object(k.a)(x,"blue","#0000ff"),Object(k.a)(x,"pink","#ff99ff"),Object(k.a)(x,"yellow","#ffff00"),Object(k.a)(x,"light_blue","#00ffff"),x),B=(w={},Object(k.a)(w,0,{0:I[R],1:I.red,2:I.green,3:I.yellow,4:I.blue,5:I.pink,6:I.light_blue,7:I[A]}),Object(k.a)(w,1,{0:I[A],1:I.light_blue,2:I.pink,3:I.blue,4:I.yellow,5:I.green,6:I.red,7:I[R]}),w);function P(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function W(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?P(e,!0).forEach((function(t){Object(k.a)(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):P(e).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}var E=Object(k.a)({},h.c.TEXT,(function(n){var t=L(65535&~(n>>12&7)),e=L(7&n>>8);return{value:0!==(255&n)?String.fromCharCode(255&n):" ",foregroundColor:t,backgroundColor:e}}));function L(n){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],e=7&n;try{return B[t?1:0][e]}catch(r){return I[R]}}function M(){var n=Object(r.useState)(Array.apply(null,Array(0)).map((function(n,t){return{address:t,value:" ",foregroundColor:I[R],backgroundColor:I[A]}}))),t=Object(a.a)(n,2),e=t[0],u=t[1],i=Object(r.useContext)(O),c=(i.dispatch,i.state);return Object(r.useEffect)((function(){c.outputPayload&&function(){console.log("address: "+c.outputPayload.address+" ,content: "+c.outputPayload.content);var n=E[c.outputMode](c.outputPayload.content),t=e.findIndex((function(n){return n.address===c.outputPayload.address}));u(-1!==t?[].concat(Object(D.a)(e.slice(0,t)),[W({address:c.outputPayload.address},n)],Object(D.a)(e.slice(t+1))).sort((function(n,t){return n-t})):[].concat(Object(D.a)(e),[W({address:c.outputPayload.address},n)]).sort((function(n,t){return n.address-t.address})))}()}),[c.outputPayload]),s.a.createElement("div",{className:"output"},e.map((function(n,t){return s.a.createElement("span",{key:t,className:"letter-spacing",style:{color:n.foregroundColor,backgroundColor:n.backgroundColor}},n.value)})))}var U,q=["f"],C={f:"POCZ"};function N(){var n=Object(r.useContext)(O).state;return s.a.createElement("div",{className:"vertical-alignment"},Object.keys(n.context).map((function(t,e){return s.a.createElement("span",{key:e}," ",function(t){var e=C.hasOwnProperty(t)?C[t]:t;return q.includes(t)?"".concat(e.toUpperCase()," : ").concat(n.context[t].toString(2)):"".concat(e.toUpperCase()," : ").concat(n.context[t].toString(16))}(t)," ")})))}function T(){return s.a.createElement("div",null,s.a.createElement("h1",null,"FPGA EMULTAOR"),s.a.createElement("div",{className:"horizontal-alignment"},s.a.createElement("div",{className:"vertical-alignment home-part-1"},s.a.createElement(S,null),s.a.createElement(M,null)),s.a.createElement("div",{className:"vertical-alignment"},s.a.createElement(N,null),s.a.createElement("div",{className:"horizontal-alignment"},s.a.createElement("button",null,"Stack Frame"),s.a.createElement("button",null,"Memory")))))}function H(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function X(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?H(e,!0).forEach((function(t){Object(k.a)(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):H(e).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}var F={memory:[],lines:[],addressInstruction:{},symbolTable:{},context:{r0:0,r1:0,r2:0,r3:0,r4:0,r5:0,r6:0,r7:0,r8:0,r9:0,r10:0,r11:0,r12:0,r13:0,pc:0,sp:0,h:0,f:0},outputPayload:null,outputMode:h.c.TEXT},V=function(n,t){try{return G[t.type](n,t.payload)}catch(e){return alert("there is no action with this type"),n}},G=(U={},Object(k.a)(U,m,(function(n,t){return X({},n,{memory:t})})),Object(k.a)(U,_,(function(n,t){return X({},n,{lines:t.lines,addressInstruction:t.addressInstruction})})),Object(k.a)(U,v,(function(n,t){return X({},n,{context:X({},n.context,{},t)})})),Object(k.a)(U,g,(function(n,t){return X({},n,{outputPayload:X({},t)})})),Object(k.a)(U,j,(function(n,t){return X({},n,{symbolTable:X({},t)})})),U);var J=function(){var n=Object(r.useReducer)(V,F),t=Object(a.a)(n,2),e=t[0],u=t[1];return s.a.createElement("div",null,s.a.createElement(O.Provider,{value:{state:e,dispatch:u}},s.a.createElement(T,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()}))},4:function(n,t,e){"use strict";e.d(t,"b",(function(){return r})),e.d(t,"a",(function(){return s})),e.d(t,"d",(function(){return u})),e.d(t,"c",(function(){return i}));var r=1e5,s={ASM:"asm",BIN:"bin",SYM:"sym"},u={MIN:-32768,MAX:32767},i={TEXT:"text",GRAPHICS_MODE_320_240:"graphics_mode_320_240",GRAPHICS_MODE_640_480:"graphics_mode_640_480"}},8:function(n,t,e){"use strict";var r=e(6),s=e(7),u=e(16),i=e(4),a=e(20),c=e(17),l=function(){function n(t,e,s,i,c){Object(r.a)(this,n),this.argumentLength=2,this.content="",this.argument=null,this.symbolAddress=null,this.addrStr=null,this.source=null,this.destination=null,this.address=null,this.opcode=null,this.ssource="",this.sdestination="",this.assembler="",this.isJump=!1,this.hasArgument=!1,this.address=e,this.opcode=t[e/2],this.source=s,this.destination=i,this.ssource=a.a[s],this.sdestination=a.a[i],this.setContent();var l=c.hasOwnProperty("0x".concat(e.toString(16)))?c["0x".concat(e.toString(16))]:null;null!==l&&l.length>0?(this.symbolAddress=l,this.addrStr=Object(u.format)("%s (%s)",this.address.toString(16),l)):(this.addrStr=Object(u.format)("%s",this.address.toString(16)),this.symbolAddress=this.addrStr)}return Object(s.a)(n,[{key:"setContent",value:function(){this.hasArgument?4!==this.argumentLength?2===this.argumentLength&&(this.content=Object(u.format)("%s, %s",this.opcode.toString(16),this.argument.toString(16))):this.content=Object(u.format)("%s, %s",this.opcode.toString(16),this.argument.toString(16)):this.content=Object(u.format)("%s",this.opcode.toString(16))}},{key:"exec",value:function(n){n.context,n.memory;throw Error("Execution of this instruction is not possible!")}},{key:"setArgument32",value:function(t){var e=t[Math.floor((this.address+2)/2)],r=t[Math.floor((this.address+4)/2)];this.argument=n.fixInt(e,r),this.hasArgument=!0,this.argumentLength=4}},{key:"setArgument8",value:function(t){var e=t[Math.floor((this.address+2)/2)];this.argument=n.fix8(e),this.hasArgument=!0,this.argumentLength=2}},{key:"setArgument",value:function(t){var e=t[Math.floor((this.address+2)/2)];this.argument=n.fix(e),this.hasArgument=!0,this.argumentLength=2}},{key:"setAssembler",value:function(n,t){if(this.hasArgument){var e=t.hasOwnProperty("0x".concat(this.argument.toString(16)))?t["0x".concat(this.argument.toString(16))]:null;e&&e.length?this.assembler=Object(u.format)(n,e):this.assembler=Object(u.format)(n,this.argument.toString(16))}else this.assembler=n}},{key:"findLabel",value:function(n){if(1===n.length)return 0;for(var t=this.address;t>=45056;t--){var e=c.a.addressInstruction[t];if(null!==e)for(var r=0;r<n.length;r++){if(n[r].includes(e.symbolAddress))return r}}for(var s=this.address;s<9e4;s++){var u=c.a.addressInstruction[s];if(null!==u)for(var i=0;i<n.length;i++){if(n[i].includes(u.symbolAddress))return i}}return-1}}],[{key:"markOverflow",value:function(t,e,r,s){var u=n.sign(t);u==n.sign(e)&u!=n.sign(r)?s.f|=4:s.f&=65531}},{key:"markFlags",value:function(n,t,e){e.f=0==t?1|e.f:65534&e.f,e.f=t<0||1==(2147483648&t)?65527&e.f:8|e.f,e.f=0!=(4294967296&n)?2|e.f:13&e.f}},{key:"sign",value:function(n){return 2147483648&n}},{key:"neg",value:function(n){return 4294967296-n&4294967295}},{key:"push",value:function(n,t,e){var r=e>>16;n[t]=r;var s=65535&e;n[t+1]=s}},{key:"pop",value:function(t,e){var r=t[e],s=t[e+1];return n.fixInt(r,s)}},{key:"fixInt",value:function(n,t){return(n>=0?n:65535&n)<<16|(t>=0?t:65535&t)}},{key:"fix8",value:function(n){return 255&n}},{key:"fix",value:function(n){return n<i.d.MIN?65535&n:4294967295&n}},{key:"getMemContent",value:function(t,e,r,s){if(!0&r)switch(2147483647&r){case 64:return t.uart;case 69:return+new Date>>20;default:return 0}var u=s[e],i=s[e+1];return n.fixInt(u,i)}},{key:"setMemContent",value:function(n,t,e,r){if(e<i.d.MIN||e>i.d.MAX)return n[t]=e>>16,void(n[t+1]=65535&e);!1&r&&(n[t]=e)}}]),n}();t.a=l}},[[25,9,10]]]);
//# sourceMappingURL=main.cb90b482.chunk.js.map